---
import Layout from '../layouts/Layout.astro';
import Breadcrumb from '../components/Breadcrumb.astro';
import { getPosts, getLatestPosts } from '../lib/queries.js';

// Fetch CMS data
const posts = await getPosts();
const latestPosts = await getLatestPosts();

// Fallback blog content for E-A-T
const fallbackPosts = [
  {
    title: "The Future of Software Development: AI-Powered Solutions",
    excerpt: "Explore how artificial intelligence is revolutionizing software development processes and what it means for businesses in 2025.",
    slug: { current: "future-software-development-ai" },
    publishedAt: "2025-01-15",
    author: { name: "Dr. Sarah Chen", role: "Lead Software Architect" },
    categories: [{ title: "Technology Trends", slug: "technology-trends" }],
    readingTime: 8,
    featuredImage: "/images/blog/ai-software-development.svg"
  },
  {
    title: "Building Scalable Web Applications: Best Practices for 2025",
    excerpt: "Learn the essential strategies for creating web applications that can handle millions of users while maintaining performance.",
    slug: { current: "scalable-web-applications-2025" },
    publishedAt: "2025-01-10",
    author: { name: "Michael Rodriguez", role: "Senior Full-Stack Developer" },
    categories: [{ title: "Web Development", slug: "web-development" }],
    readingTime: 12,
    featuredImage: "/images/blog/scalable-web-apps.svg"
  },
  {
    title: "Digital Transformation Success Stories: Real Business Impact",
    excerpt: "Discover how our clients achieved 300% ROI through strategic digital transformation initiatives.",
    slug: { current: "digital-transformation-success-stories" },
    publishedAt: "2025-01-05",
    author: { name: "Emily Watson", role: "Digital Transformation Consultant" },
    categories: [{ title: "Case Studies", slug: "case-studies" }],
    readingTime: 10,
    featuredImage: "/images/blog/digital-transformation.svg"
  },
  {
    title: "Mobile App Development: Native vs Cross-Platform in 2025",
    excerpt: "Comprehensive comparison of native and cross-platform mobile development approaches for modern businesses.",
    slug: { current: "native-vs-cross-platform-2025" },
    publishedAt: "2024-12-28",
    author: { name: "Alex Thompson", role: "Mobile Development Lead" },
    categories: [{ title: "Mobile Development", slug: "mobile-development" }],
    readingTime: 15,
    featuredImage: "/images/blog/mobile-development.svg"
  },
  {
    title: "Cybersecurity in Software Development: Protecting Your Applications",
    excerpt: "Essential security practices every software development team should implement to protect against modern threats.",
    slug: { current: "cybersecurity-software-development" },
    publishedAt: "2024-12-20",
    author: { name: "David Kim", role: "Security Specialist" },
    categories: [{ title: "Security", slug: "security" }],
    readingTime: 14,
    featuredImage: "/images/blog/cybersecurity.svg"
  },
  {
    title: "Cloud-Native Development: Building for the Future",
    excerpt: "How cloud-native architecture is reshaping software development and deployment strategies.",
    slug: { current: "cloud-native-development-future" },
    publishedAt: "2024-12-15",
    author: { name: "Lisa Park", role: "Cloud Solutions Architect" },
    categories: [{ title: "Cloud Computing", slug: "cloud-computing" }],
    readingTime: 11,
    featuredImage: "/images/blog/cloud-native.svg"
  }
];

// Use CMS data or fallback
const blogPosts = posts?.length > 0 ? posts : fallbackPosts;
const featuredPosts = latestPosts?.length > 0 ? latestPosts : fallbackPosts.slice(0, 3);

// SEO metadata
const title = "Blog | EA Soft Lab - Software Development Insights & Trends";
const description = "Expert insights on software development, digital transformation, and technology trends. Stay ahead with our comprehensive guides and industry analysis.";
---

<Layout 
  title={title}
  description={description}
  type="website"
  keywords={["software development blog", "technology insights", "digital transformation", "web development tips", "mobile app development", "AI software development"]}
>
  <!-- Main Content with Continuous Dark Background -->
  <div class="relative overflow-hidden" style="background-color: hsl(230, 30%, 5%); background-image: radial-gradient(at 20% 20%, hsl(210, 60%, 20%) 0px, transparent 50%), radial-gradient(at 80% 80%, hsl(240, 50%, 15%) 0px, transparent 50%);">
    
    <!-- Breadcrumb Navigation -->
    <Breadcrumb 
      items={[
        { name: "Home", url: "https://easoftlab.com", position: 1 },
        { name: "Blog", url: "https://easoftlab.com/blog", position: 2 }
      ]} 
    />
    
    <!-- Hero Section -->
    <div class="pt-24 pb-16 relative z-10" data-lazy-load>
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center">
          <h1 class="text-4xl md:text-5xl font-bold text-white mb-6 mt-8 pt-4 opacity-0 transform translate-y-8 transition-all duration-1000 ease-out delay-200" data-lazy-animate>
            Software Development
            <span class="bg-gradient-to-r from-primary-400 to-accent-400 bg-clip-text text-transparent animate-gradient">Insights & Trends</span>
          </h1>
          <p class="text-xl text-gray-300 mb-8 max-w-3xl mx-auto opacity-0 transform translate-y-8 transition-all duration-1000 ease-out delay-400" data-lazy-animate>
            Expert analysis, best practices, and industry insights from our team of software development professionals. 
            Stay ahead of the curve with our comprehensive guides and real-world case studies.
          </p>
          <div class="flex flex-col sm:flex-row gap-4 justify-center opacity-0 transform translate-y-8 transition-all duration-1000 ease-out delay-600" data-lazy-animate>
            <a href="#featured-posts" class="bg-gradient-to-r from-primary-500 to-accent-500 hover:from-primary-600 hover:to-accent-600 text-white px-8 py-4 rounded-xl text-lg font-semibold transition-all duration-300 transform hover:scale-105 shadow-2xl hover:shadow-primary-500/25 animate-bounce-slow">
              Read Latest Posts
            </a>
            <a href="/contact" class="bg-white/10 backdrop-blur-sm border border-white/20 text-white hover:bg-white/20 px-8 py-4 rounded-xl text-lg font-semibold transition-all duration-300 shadow-lg animate-bounce-slow animation-delay-200">
              Get Expert Consultation
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Featured Posts -->
    <div id="featured-posts" class="py-16 relative z-10" data-lazy-load>
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12 opacity-0 transform translate-y-8 transition-all duration-1000 ease-out" data-lazy-animate>
          <h2 class="text-3xl font-bold text-white mb-4">Featured Articles</h2>
          <p class="text-lg text-gray-300">Expert insights and industry analysis</p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {featuredPosts.map((post, index) => (
            <article class="bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl overflow-hidden hover:bg-white/10 transition-all duration-300 group shadow-lg opacity-0 transform translate-y-8 transition-all duration-1000 ease-out hover:scale-105 hover:shadow-2xl" data-lazy-animate style={`animation-delay: ${index * 100}ms`}>
              <div class="aspect-w-16 aspect-h-9 bg-gray-700 rounded-lg overflow-hidden">
                <img 
                  src={post.featuredImage || "/images/blog/placeholder.jpg"} 
                  alt={post.title}
                  class="w-full h-48 object-cover"
                />
              </div>
              <div class="p-6">
                <div class="flex items-center mb-3">
                  <span class="text-sm text-primary-400 font-medium">
                    {post.categories?.[0]?.title || "Technology"}
                  </span>
                  <span class="mx-2 text-gray-500">â€¢</span>
                  <span class="text-sm text-gray-400">
                    {new Date(post.publishedAt).toLocaleDateString()}
                  </span>
                </div>
                <h3 class="text-xl font-semibold text-white mb-3 line-clamp-2">
                  {post.title}
                </h3>
                <p class="text-gray-300 mb-4 line-clamp-3">
                  {post.excerpt}
                </p>
                <div class="flex items-center justify-between">
                  <div class="flex items-center">
                    <div class="w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center">
                      <span class="text-white font-semibold text-sm">
                        {post.author?.name?.charAt(0) || "E"}
                      </span>
                    </div>
                    <div class="ml-3">
                      <p class="text-sm font-medium text-white">{post.author?.name || "EA Soft Lab Team"}</p>
                      <p class="text-xs text-gray-400">{post.author?.role || "Software Development Expert"}</p>
                    </div>
                  </div>
                  <span class="text-sm text-gray-400">{post.readingTime} min read</span>
                </div>
              </div>
            </article>
          ))}
        </div>
      </div>
    </div>

    <!-- All Posts -->
    <div class="py-16 relative z-10" data-lazy-load>
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12 opacity-0 transform translate-y-8 transition-all duration-1000 ease-out" data-lazy-animate>
          <h2 class="text-3xl font-bold text-white mb-4">All Articles</h2>
          <p class="text-lg text-gray-300">Comprehensive insights and guides</p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {blogPosts.map((post, index) => (
            <article class="bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl overflow-hidden hover:bg-white/10 transition-all duration-300 group shadow-lg opacity-0 transform translate-y-8 transition-all duration-1000 ease-out hover:scale-105 hover:shadow-2xl" data-lazy-animate style={`animation-delay: ${index * 100}ms`}>
              <div class="aspect-w-16 aspect-h-9 bg-gray-700 rounded-lg overflow-hidden">
                <img 
                  src={post.featuredImage || "/images/blog/placeholder.jpg"} 
                  alt={post.title}
                  class="w-full h-48 object-cover"
                />
              </div>
              <div class="p-6">
                <div class="flex items-center mb-3">
                  <span class="text-sm text-primary-400 font-medium">
                    {post.categories?.[0]?.title || "Technology"}
                  </span>
                  <span class="mx-2 text-gray-500">â€¢</span>
                  <span class="text-sm text-gray-400">
                    {new Date(post.publishedAt).toLocaleDateString()}
                  </span>
                </div>
                <h3 class="text-lg font-semibold text-white mb-3 line-clamp-2">
                  {post.title}
                </h3>
                <p class="text-gray-300 mb-4 line-clamp-3">
                  {post.excerpt}
                </p>
                <div class="flex items-center justify-between">
                  <div class="flex items-center">
                    <div class="w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center">
                      <span class="text-white font-semibold text-sm">
                        {post.author?.name?.charAt(0) || "E"}
                      </span>
                    </div>
                    <div class="ml-3">
                      <p class="text-sm font-medium text-white">{post.author?.name || "EA Soft Lab Team"}</p>
                      <p class="text-xs text-gray-400">{post.author?.role || "Software Development Expert"}</p>
                    </div>
                  </div>
                  <span class="text-sm text-gray-400">{post.readingTime} min read</span>
                </div>
              </div>
            </article>
          ))}
        </div>
      </div>
    </div>

    <!-- CTA Section -->
    <div class="py-16 relative z-10" data-lazy-load>
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h2 class="text-3xl font-bold text-white mb-4 opacity-0 transform translate-y-8 transition-all duration-1000 ease-out" data-lazy-animate>Ready to Transform Your Business?</h2>
        <p class="text-xl text-gray-300 mb-8 opacity-0 transform translate-y-8 transition-all duration-1000 ease-out delay-200" data-lazy-animate>
          Get expert consultation and start your digital transformation journey today.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center opacity-0 transform translate-y-8 transition-all duration-1000 ease-out delay-400" data-lazy-animate>
          <a href="/contact" class="bg-gradient-to-r from-primary-500 to-accent-500 hover:from-primary-600 hover:to-accent-600 text-white px-8 py-4 rounded-xl text-lg font-semibold transition-all duration-300 transform hover:scale-105 shadow-2xl hover:shadow-primary-500/25 animate-bounce-slow">
            Get Free Consultation
          </a>
          <a href="/services" class="bg-white/10 backdrop-blur-sm border border-white/20 text-white hover:bg-white/20 px-8 py-4 rounded-xl text-lg font-semibold transition-all duration-300 shadow-lg animate-bounce-slow animation-delay-200">
            View Our Services
          </a>
        </div>
      </div>
    </div>

  </div>
</Layout>

<!-- Blog Schema -->
<script type="application/ld+json" set:html={JSON.stringify({
  "@context": "https://schema.org",
  "@type": "Blog",
  "name": "EA Soft Lab Blog",
  "description": "Expert insights on software development, digital transformation, and technology trends",
  "url": "https://easoftlab.com/blog",
  "publisher": {
    "@type": "Organization",
    "name": "EA Soft Lab",
    "logo": {
      "@type": "ImageObject",
      "url": "https://easoftlab.com/logo.png"
    }
  },
  "blogPost": blogPosts.map(post => ({
    "@type": "BlogPosting",
    "headline": post.title,
    "description": post.excerpt,
    "author": {
      "@type": "Person",
      "name": post.author?.name || "EA Soft Lab Team"
    },
    "datePublished": post.publishedAt,
    "publisher": {
      "@type": "Organization",
      "name": "EA Soft Lab"
    }
  }))
})} /> 