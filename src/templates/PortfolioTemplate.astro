---
import ThemeLayout from '../layouts/ThemeLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import ThemeElements from '../components/ThemeElements.astro';

export interface Props {
  title: string;
  description?: string;
  category?: string;
  client?: string;
  duration?: string;
  technologies?: string[];
  projectImage?: string;
  gallery?: string[];
  challenge?: string;
  solution?: string;
  results?: Array<{
    metric: string;
    value: string;
    description: string;
  }>;
  testimonial?: {
    name: string;
    role: string;
    company: string;
    content: string;
  };
  showHeader?: boolean;
  showFooter?: boolean;
}

const {
  title,
  description,
  category,
  client,
  duration,
  technologies = [],
  projectImage,
  gallery = [],
  challenge,
  solution,
  results = [],
  testimonial,
  showHeader = true,
  showFooter = true
} = Astro.props;
---

<ThemeLayout 
  title={title}
  description={description}
>
  {showHeader && <Header />}
  
  <!-- Portfolio Hero Section -->
  <div class="theme-section pt-24 pb-16" data-lazy-load>
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid lg:grid-cols-2 gap-12 items-center">
        <!-- Project Info -->
        <div class="opacity-0 transform translate-y-8 transition-all duration-1000 ease-out" data-lazy-animate>
          <!-- Category Badge -->
          {category && (
            <ThemeElements type="badge" text={category} class="mb-6" />
          )}
          
          <!-- Project Title -->
          <h1 class="text-4xl md:text-5xl font-bold theme-text-primary mb-6">
            {title}
          </h1>
          
          <!-- Project Description -->
          {description && (
            <p class="text-xl theme-text-secondary mb-8">
              {description}
            </p>
          )}
          
          <!-- Project Details -->
          <div class="space-y-4 mb-8">
            {client && (
              <div class="flex items-center">
                <span class="font-semibold theme-text-primary w-24">Client:</span>
                <span class="theme-text-secondary">{client}</span>
              </div>
            )}
            {duration && (
              <div class="flex items-center">
                <span class="font-semibold theme-text-primary w-24">Duration:</span>
                <span class="theme-text-secondary">{duration}</span>
              </div>
            )}
            {technologies.length > 0 && (
              <div class="flex items-start">
                <span class="font-semibold theme-text-primary w-24">Tech Stack:</span>
                <div class="flex flex-wrap gap-2">
                  {technologies.map(tech => (
                    <ThemeElements type="badge" text={tech} />
                  ))}
                </div>
              </div>
            )}
          </div>
          
          <!-- CTA Buttons -->
          <div class="flex flex-col sm:flex-row gap-4">
            <ThemeElements type="button" variant="primary" href="/contact">
              Start Similar Project
            </ThemeElements>
            <ThemeElements type="button" variant="secondary" href="#gallery">
              View Gallery
            </ThemeElements>
          </div>
        </div>
        
        <!-- Project Image -->
        {projectImage && (
          <div class="opacity-0 transform translate-y-8 transition-all duration-1000 ease-out delay-200" data-lazy-animate>
            <ThemeElements type="card" class="p-0 overflow-hidden">
              <img 
                src={projectImage} 
                alt={title}
                class="w-full h-96 object-cover"
              />
            </ThemeElements>
          </div>
        )}
      </div>
    </div>
  </div>

  <!-- Challenge & Solution Section -->
  {(challenge || solution) && (
    <div class="theme-section py-16" data-lazy-load>
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid md:grid-cols-2 gap-12 opacity-0 transform translate-y-8 transition-all duration-1000 ease-out" data-lazy-animate>
          {challenge && (
            <ThemeElements type="card" class="p-8">
              <h3 class="text-2xl font-bold theme-text-primary mb-4">The Challenge</h3>
              <p class="theme-text-secondary">{challenge}</p>
            </ThemeElements>
          )}
          {solution && (
            <ThemeElements type="card" class="p-8">
              <h3 class="text-2xl font-bold theme-text-primary mb-4">Our Solution</h3>
              <p class="theme-text-secondary">{solution}</p>
            </ThemeElements>
          )}
        </div>
      </div>
    </div>
  )}

  <!-- Results Section -->
  {results.length > 0 && (
    <div class="theme-section py-16" data-lazy-load>
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="text-3xl font-bold theme-text-primary mb-12 text-center opacity-0 transform translate-y-8 transition-all duration-1000 ease-out" data-lazy-animate>
          Project Results
        </h2>
        <div class="grid md:grid-cols-3 gap-8 opacity-0 transform translate-y-8 transition-all duration-1000 ease-out delay-200" data-lazy-animate>
          {results.map((result, index) => (
            <ThemeElements type="card" class="p-6 text-center">
              <div class="text-3xl font-bold theme-gradient-text mb-2">{result.value}</div>
              <h3 class="text-xl font-semibold theme-text-primary mb-2">{result.metric}</h3>
              <p class="theme-text-secondary">{result.description}</p>
            </ThemeElements>
          ))}
        </div>
      </div>
    </div>
  )}

  <!-- Gallery Section -->
  {gallery.length > 0 && (
    <div id="gallery" class="theme-section py-16" data-lazy-load>
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="text-3xl font-bold theme-text-primary mb-12 text-center opacity-0 transform translate-y-8 transition-all duration-1000 ease-out" data-lazy-animate>
          Project Gallery
        </h2>
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 opacity-0 transform translate-y-8 transition-all duration-1000 ease-out delay-200" data-lazy-animate>
          {gallery.map((image, index) => (
            <ThemeElements type="card" class="p-0 overflow-hidden">
              <img 
                src={image} 
                alt={`${title} - Image ${index + 1}`}
                class="w-full h-64 object-cover hover:scale-105 transition-transform duration-300"
              />
            </ThemeElements>
          ))}
        </div>
      </div>
    </div>
  )}

  <!-- Testimonial Section -->
  {testimonial && (
    <div class="theme-section py-16" data-lazy-load>
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <ThemeElements type="card" class="p-8 text-center opacity-0 transform translate-y-8 transition-all duration-1000 ease-out" data-lazy-animate>
          <svg class="w-12 h-12 text-primary-500 mx-auto mb-6" fill="currentColor" viewBox="0 0 24 24">
            <path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h3.983v10h-9.983z"/>
          </svg>
          <p class="text-xl theme-text-secondary mb-6 italic">"{testimonial.content}"</p>
          <div>
            <p class="font-semibold theme-text-primary">{testimonial.name}</p>
            <p class="text-sm theme-text-muted">{testimonial.role} at {testimonial.company}</p>
          </div>
        </ThemeElements>
      </div>
    </div>
  )}

  <!-- Related Projects Section -->
  <div class="theme-section py-16" data-lazy-load>
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold theme-text-primary mb-12 text-center opacity-0 transform translate-y-8 transition-all duration-1000 ease-out" data-lazy-animate>
        More Projects
      </h2>
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 opacity-0 transform translate-y-8 transition-all duration-1000 ease-out delay-200" data-lazy-animate>
        <ThemeElements type="card" class="p-0 overflow-hidden">
          <img src="/images/projects/project-1.jpg" alt="Project 1" class="w-full h-48 object-cover" />
          <div class="p-6">
            <h3 class="text-xl font-semibold theme-text-primary mb-2">E-commerce Platform</h3>
            <p class="theme-text-secondary mb-4">Modern e-commerce solution with advanced features</p>
            <ThemeElements type="button" variant="secondary" href="/portfolio/ecommerce-platform">
              View Project
            </ThemeElements>
          </div>
        </ThemeElements>
        <ThemeElements type="card" class="p-0 overflow-hidden">
          <img src="/images/projects/project-2.jpg" alt="Project 2" class="w-full h-48 object-cover" />
          <div class="p-6">
            <h3 class="text-xl font-semibold theme-text-primary mb-2">Mobile App</h3>
            <p class="theme-text-secondary mb-4">Cross-platform mobile application</p>
            <ThemeElements type="button" variant="secondary" href="/portfolio/mobile-app">
              View Project
            </ThemeElements>
          </div>
        </ThemeElements>
        <ThemeElements type="card" class="p-0 overflow-hidden">
          <img src="/images/projects/project-3.jpg" alt="Project 3" class="w-full h-48 object-cover" />
          <div class="p-6">
            <h3 class="text-xl font-semibold theme-text-primary mb-2">Web Application</h3>
            <p class="theme-text-secondary mb-4">Custom web application for business</p>
            <ThemeElements type="button" variant="secondary" href="/portfolio/web-application">
              View Project
            </ThemeElements>
          </div>
        </ThemeElements>
      </div>
    </div>
  </div>

  <!-- CTA Section -->
  <div class="theme-section py-16" data-lazy-load>
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="text-3xl font-bold theme-text-primary mb-6 opacity-0 transform translate-y-8 transition-all duration-1000 ease-out" data-lazy-animate>
        Ready to Start Your Project?
      </h2>
      <p class="text-xl theme-text-secondary mb-8 opacity-0 transform translate-y-8 transition-all duration-1000 ease-out delay-200" data-lazy-animate>
        Let's create something amazing together. Get in touch to discuss your project.
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center opacity-0 transform translate-y-8 transition-all duration-1000 ease-out delay-400" data-lazy-animate>
        <ThemeElements type="button" variant="primary" href="/contact">
          Start Your Project
        </ThemeElements>
        <ThemeElements type="button" variant="secondary" href="/portfolio">
          View All Projects
        </ThemeElements>
      </div>
    </div>
  </div>

  {showFooter && <Footer />}
</ThemeLayout>

<style>
  /* Portfolio-specific styles */
  .theme-section {
    position: relative;
    z-index: 10;
  }
  
  /* Gallery image hover effects */
  .theme-card img:hover {
    transform: scale(1.05);
  }
  
  /* Smooth transitions for gallery images */
  .theme-card img {
    transition: transform 0.3s ease;
  }
</style>
