---
export interface Props {
  title: string;
  description: string;
  videoUrl: string;
  transcript?: string;
  duration?: string;
  thumbnail?: string;
}

const { title, description, videoUrl, transcript, duration, thumbnail } = Astro.props;
---

<div class="video-optimizer bg-white rounded-lg shadow-lg overflow-hidden">
  <div class="aspect-w-16 aspect-h-9 bg-gray-100">
    <iframe
      src={videoUrl}
      title={title}
      class="w-full h-full"
      frameborder="0"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
      allowfullscreen
    />
  </div>
  
  <div class="p-6">
    <h3 class="text-xl font-semibold text-gray-900 mb-2">{title}</h3>
    <p class="text-gray-600 mb-4">{description}</p>
    
    {duration && (
      <div class="flex items-center text-sm text-gray-500 mb-4">
        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        Duration: {duration}
      </div>
    )}
    
    {transcript && (
      <details class="mt-4">
        <summary class="cursor-pointer text-primary-600 hover:text-primary-700 font-medium">
          View Transcript
        </summary>
        <div class="mt-3 p-4 bg-gray-50 rounded-lg">
          <p class="text-sm text-gray-700 leading-relaxed whitespace-pre-line">
            {transcript}
          </p>
        </div>
      </details>
    )}
  </div>
</div>

<!-- Video Schema -->
<script type="application/ld+json" set:html={JSON.stringify({
  "@context": "https://schema.org",
  "@type": "VideoObject",
  "name": title,
  "description": description,
  "url": videoUrl,
  "thumbnailUrl": thumbnail,
  "duration": duration,
  "uploadDate": new Date().toISOString(),
  "publisher": {
    "@type": "Organization",
    "name": "EA Soft Lab",
    "logo": {
      "@type": "ImageObject",
      "url": "https://easoftlab.com/logo.png"
    }
  },
  "creator": {
    "@type": "Organization",
    "name": "EA Soft Lab"
  },
  "transcript": transcript,
  "potentialAction": {
    "@type": "WatchAction",
    "target": videoUrl
  }
})} /> 